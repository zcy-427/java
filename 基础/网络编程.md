Java 网络编程是基于**TCP/IP 协议栈**封装底层通信细节，提供易用的 API 实现跨主机数据交互的技术，核心是**Socket（套接字）** —— 网络通信的端点（由 IP 地址 + 端口号唯一标识）。本文从基础概念、核心 API、编程模型、高级特性到实战重点全面讲解，标注所有核心重点。

## 基础概念

### 软件架构

#### **C/S(客户端 - 服务器架构)**

将系统拆分为**客户端（Client）和服务器（Server）** 两部分，通过网络通信交互：

客户端：负责用户交互（如桌面 APP、手机 APP），处理部分本地逻辑（如数据缓存、UI 渲染）；
服务器：负责核心业务处理、数据存储（如数据库服务器、应用服务器），为多个客户端提供服务。

```plaintext
客户端（PC/手机APP） ←→ 服务器（应用服务器 + 数据库服务器）
```

- 通信方式：TCP/UDP 协议（如 Socket）、HTTP 协议（如 REST API）。

其性能好，交互体验佳，适用于对交互体验和性能要求高的场景（如游戏、办公软件、金融 APP）。比如各种手机APP

#### **B/S(浏览器 - 服务器架构)**

C/S 架构的简化版，**客户端统一为浏览器**（如 Chrome、Edge），服务器负责所有业务逻辑和数据存储，用户通过浏览器访问系统（无需安装额外客户端）。

```plaintext
浏览器（用户） ←→ Web服务器（如Nginx） ←→ 应用服务器（如Tomcat） ←→ 数据库服务器
```

- 通信方式：HTTP/HTTPS 协议（如 REST API、HTML 渲染）。

其方便访问，无需安装客户端，维护成本低，适用于互联网应用、企业 Web 系统（如电商网站、在线教育平台、OA 系统）。比如各种网页版应用


### 协议+IP地址+端口

这里我们可以把用户访问服务器的过程比作从自己家去到别人家，这里的**协议**相当于交通工具（汽车/飞机等），**IP地址**相当于别人家的住在哪一个街道（xxxx路xxx街），而**端口**相当于门牌号

其本质是**IP地址**用于标识“网络中的路由节点 / 设备”，而**端口**用于标识 “设备上的程序通道”

协议我们后面再说，总之我们通过**协议+IP地址+端口**的这样的一个组合，我们就可以精准的访问到特定服务器上的一个特定服务程序。

#### IP的分类

##### **IPv4**

IPv4 地址是 32 位二进制数（如`11000000.10101000.00000001.00000001`），通常转换为 **点分十进制（Dotted Decimal）** 表示（如`192.168.1.1`）其按照 **前几位二进制（网络位前缀）** 划分 A-E 类

| 类别  | 网络位（前 n 位）        | 主机位     | 点分十进制地址范围                   | 默认子网掩码        | 可分配主机数（理论）         | 适用场景             |
| --- | ----------------- | ------- | --------------------------- | ------------- | ------------------ | ---------------- |
| A 类 | 8 位（前 1 位 = 0）    | 24 位    | 1.0.0.0 ~ 126.255.255.255   | 255.0.0.0     | 2²⁴ - 2 = 16777214 | 大型网络（如跨国企业、运营商）  |
| B 类 | 16 位（前 2 位 = 10）  | 16 位    | 128.0.0.0 ~ 191.255.255.255 | 255.255.0.0   | 2¹⁶ - 2 = 65534    | 中型网络（如学校、中型企业）   |
| C 类 | 24 位（前 3 位 = 110） | 8 位     | 192.0.0.0 ~ 223.255.255.255 | 255.255.255.0 | 2⁸ - 2 = 254       | 小型网络（如家庭、办公室局域网） |
| D 类 | 前 4 位 = 1110      | 无（组播地址） | 224.0.0.0 ~ 239.255.255.255 | 无默认子网掩码       | 无（不分配给主机）          | 组播通信（如视频会议、直播）   |
| E 类 | 前 4 位 = 1111      | 无（保留地址） | 240.0.0.0 ~ 255.255.255.255 | 无默认子网掩码       | 无（不分配给主机）          | 科研、实验用途（未公开使用）   |
这里**可分配主机数减2的原因**是：每个网段中，**网络地址（主机位全 0）** 和 **广播地址（主机位全 1）** 是特殊地址，不能分配给具体设备（如电脑、手机）。
##### **子网掩码的作用**

子网掩码的二进制结构遵循 “全 1 对应网络位，全 0 对应主机位” 的规则：

- 二进制中 “1” 的部分：标识 IP 地址的 **网络位**（代表设备所在的 “网段”）；
- 二进制中 “0” 的部分：标识 IP 地址的 **主机位**（代表网段内的 “具体设备”）。

把 IP 地址比作一块 “32 格的蛋糕”：

- 子网掩码的 “1”= 蛋糕的 “公共部分”（代表网段，所有人共享）；
- 子网掩码的 “0”= 蛋糕的 “私有部分”（代表设备，每个设备独占）；
- 不同的子网掩码，就是 “切蛋糕的方式不同”—— 切的 “公共部分” 越多（1 越多），“私有部分” 越少（0 越少），网段内可容纳的设备就越少；反之则设备越多。

子网掩码**常用于判断两台设备是否在 “同一网段”（能否直接通信）**，局域网内的设备，只有在**同一网段**才能直接通信（无需路由器转发）；不同网段的设备，必须通过路由器转发才能通信。

- 对两台设备的 IP 地址，分别和子网掩码进行 **二进制与运算**；
- 若运算结果（即 “网络地址”）相同 → 同一网段，可直接通信；
- 若结果不同 → 不同网段，需路由器转发

再就是**用于子网划分（解决 IP 地址浪费问题）**，避免大网段的 IP 浪费，适配不同规模的子网络（如公司的不同部门、学校的不同院系）；

##### IPv4的特殊地址

1.私有 IP 地址（局域网专用，不可公网访问）

2.公网 IP 地址（互联网全局唯一）

3.广播地址（网段内全员接收）

4.0.0.0.0（任意地址）

5.127.0.0.1(本地回环地址)

##### IPv6

IPv4 地址仅 32 位，总数量约 43 亿，已耗尽，因此 IPv6（128 位）成为下一代 IP 协议，地址数量约`2¹²⁸`（足够全球设备使用）。

| 分类   | 前缀（前 n 位）          | 地址范围                   | 适用场景                                       |
| ---- | ------------------ | ---------------------- | ------------------------------------------ |
| 单播地址 | 001（全球单播）          | 2000::/3 ~ 3fff:ffff/3 | 类似 IPv4 公网 IP，全球唯一，用于设备间点对点通信              |
|      | 1111111010（链路本地单播） | fe80::/10              | 类似 IPv4 私有 IP，仅在同一链路（局域网）内使用，自动分配          |
| 组播地址 | 11111111（ff00::/8） | ff00::/8 ~ ffff::/8    | 类似 IPv4 D 类地址，用于组播通信（如视频会议）                |
| 任播地址 | 与单播地址前缀相同          | 同单播地址范围                | 发送到任播地址的数据，由 “最近的一个目标设备” 接收（如 DNS 服务器负载均衡） |

##### 域名

可以 **互联网中用于标识主机（服务器 / 设备）的人性化字符串**，核心作用是替代难记的 IP 地址（如`180.101.49.11`），让用户通过易读易记的名称（如`www.baidu.com`）访问网络服务

结构拆解（以`www.baidu.com`为例）

| 层级        | 名称        | 示例值     | 作用说明                                                  |
| --------- | --------- | ------- | ----------------------------------------------------- |
| 第 1 层（最左） | 主机名（Host） | `mail`  | 标识服务器上的具体服务（如`mail`= 邮件服务，`www`=Web 服务，`ftp`= 文件传输服务） |
| 第 2 层     | 二级域名（SLD） | `baidu` | 核心域名，通常是机构 / 企业的名称（如`baidu`= 百度，`github`=GitHub）      |
| 第 3 层（最右） | 顶级域名（TLD） | `com`   | 域名的最高层级，标识域名类型（如`com`= 商业机构，`cn`= 中国地区）               |

**DNS解析：域名->IP** 

* [ ] DNS详解
---
#### 端口

 端口是 **传输层协议（TCP/UDP）** 中的概念，用 16 位无符号整数表示，范围是 `0~65535`（共 65536 个端口）；
 
 一台设备（如电脑、服务器）可能同时运行多个网络程序（如浏览器、微信、本地 Tomcat 服务器、MySQL 数据库）；IP 地址仅能定位到设备，而端口能精准定位到设备上的某个网络程序

端口仅在 **单台设备内部** 唯一，不具备跨设备唯一性（例如：设备 A 的 8080 端口和设备 B 的 8080 端口是独立的，互不冲突）。

端口按用途分为 **知名端口、注册端口、动态 / 私有端口** 三类，范围和用途明确，是开发和部署的基础规范：

|分类|端口范围|核心用途|关键注意事项|
|---|---|---|---|
|知名端口（Well-Known Ports）|0~1023|系统 / 常用网络服务的默认端口（由 IANA（互联网号码分配局）统一分配管理）|1. 普通用户程序不建议使用（需管理员权限）；<br><br>2. 避免占用已分配的知名端口（如 80、443、3306）|
|注册端口（Registered Ports）|1024~49151|用户自定义网络服务、应用程序的常用端口（可向 IANA 注册，避免冲突）|1. 开发中优先选择此范围端口；<br><br>2. 需提前确认端口未被其他常用程序占用（如 8080、9090）|
|动态 / 私有端口（Dynamic/Private Ports）|49152~65535|客户端程序临时使用的端口（由操作系统自动分配，用完释放）|1. 不建议手动绑定此范围端口（可能被系统征用）；<br><br>2. 客户端 Socket 无需手动指定，由系统随机分配|
- [ ] 端口在编程方面的东西

---

**一些协议**

