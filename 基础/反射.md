Java 反射（Reflection）是指**程序在运行时动态获取类的完整信息（属性、方法、构造器、父类、接口、注解等），并能动态调用对象的方法、修改属性值** 的能力。
正常情况下，Java 代码的执行是 “编译期确定、运行期执行”，而反射打破了这一限制，让程序在运行时才决定操作的类和方法，是 Java 动态性的核心体现。

## 反射的核心基础：Class 类
反射的入口是 `java.lang.Class` 类 ——**每个类在 JVM 中都有且仅有一个对应的 Class 对象**，它保存了该类的所有元数据（类名、父类、接口、字段、方法等）。

> [!NOTE] 补充
> - 基本类型的 Class 对象：`int.class`、`boolean.class`（包装类的`TYPE`属性等价于基本类型 Class，如`Integer.TYPE == int.class`）；
> - 数组的 Class 对象：`String[].class`、`int[][].class`；
> - 枚举、注解、接口都有对应的 Class 对象。

### 获取 Class 对象的 3 种方式

|方式|示例|特点|
|---|---|---|
|类名.class|`Class<String> cls = String.class;`|编译期确定，最安全、高效，无需实例|
|对象.getClass ()|`String str = "test"; Class<?> cls = str.getClass();`|运行时获取，需先创建对象|
|Class.forName (全限定类名)|`Class<?> cls = Class.forName("java.lang.String");`|运行时动态加载，最灵活，需处理 `ClassNotFoundException`|

## 反射的核心 API（java.lang.reflect 包）

| 类 / 接口            | 作用                                            |
| ----------------- | --------------------------------------------- |
| Constructor<T>    | 表示类的构造器，用于实例化对象                               |
| Method            | 表示类的方法，用于调用方法                                 |
| Field             | 表示类的字段，用于访问 / 修改字段值                           |
| Modifier          | 工具类，解析类 / 方法 / 字段的修饰符（如 public、private、final） |
| ParameterizedType | 表示泛型类型（如`List<String>`）                       |
| Annotation        | 表示注解，用于解析注解信息                                 |

## 反射的核心操作步骤

以自定义`User`类为例，演示反射的核心操作：
```java
// 目标类
public class User {
    // 字段（不同访问修饰符）
    public String username;
    private Integer age;
    // 构造器
    public User() {}
    private User(String username, Integer age) {
        this.username = username;
        this.age = age;
    }
    // 方法
    public String getUsername() {
        return username;
    }
    private void setAge(Integer age) {
        this.age = age;
    }
    @Override
    public String toString() {
        return "User{username='" + username + "', age=" + age + "}";
    }
}
```
#### 步骤 1：获取 Class 对象

```java
// 方式3：动态加载（最常用，适配配置化场景）
Class<?> userClass = Class.forName("com.example.reflect.User");
```

#### 步骤 2：操作构造器（实例化对象）
`Class`类提供以下方法获取构造器：

- `getConstructor(Class<?>... paramTypes)`：获取**public**构造器（参数为构造器参数类型的 Class 数组）；
- `getDeclaredConstructor(Class<?>... paramTypes)`：获取**任意访问修饰符**的构造器（包括 private）；
- `getConstructors()`/`getDeclaredConstructors()`：获取所有对应构造器。
```

```